<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>出席管理システム</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    textarea {
      width: 100%;
      height: 50px;
      border: 1px solid #ccc;
      resize: none;
    }
    textarea:focus {
      outline: none;
      box-shadow: none;
    }
  </style>
</head>
<body>
  <h1>出席記録</h1>
  <table>
    <thead>
      <tr>
        <th>学籍番号</th>
        <th>名前</th>
        <th>記録</th>
        <th>自己記録（理由）</th>
      </tr>
    </thead>
    <tbody id="student-table-body">
      <!-- JavaScriptでここに行を追加 -->
    </tbody>
  </table>

  <script>
    // 出席情報データ（CSV1相当）
    const attendanceData = [
      { id: "Tk 256769", name: "山田安奈", status: "attendance" },
      { id: "Tk 5252957", name: "馬場太郎", status: "attendance" },
      { id: "Tk 629572975", name: "佐々木まお", status: "absent" },
      { id: "Tk 57797", name: "佐藤あきら", status: "official absent" },
      { id: "Tk 572958297", name: "佐藤 あき", status: "late" }
    ];

    // 理由データ（CSV2相当）
    const reasonData = {
      "Tk 572957297": "遅延のため",
      "Tk 527057829": "体調不良のため",
      "Tk 572957829": "事故に巻き込まれた",
      "Tk 572195729": "公欠",
      "Tk 57629572": "公欠"
    };

    // テーブルに行を追加
    const tbody = document.getElementById("student-table-body");

    attendanceData.forEach(student => {
      const row = document.createElement("tr");

      // 学籍番号から理由を探す
      let reason = "";
      const studentIdNormalized = student.id.replace(/\s+/g, ""); // 空白除去

      for (const key in reasonData) {
        const reasonIdNormalized = key.replace(/\s+/g, "");
        if (studentIdNormalized === reasonIdNormalized) {
          reason = reasonData[key];
          break;
        }
      }

      // 出席者には理由を表示しない
      if (student.status === "attendance") {
        reason = "";
      }

      row.innerHTML = `
        <td>${student.id}</td>
        <td>${student.name}</td>
        <td>${student.status}</td>
        <td><textarea readonly>${reason}</textarea></td>
      `;

      tbody.appendChild(row);
    });
  </script>
</body>
</html>

